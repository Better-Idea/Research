# SERIAL STAGGERED SCANNING.
接触过单片机的小伙伴一定知道矩阵键盘，通过行和列确定按下按钮的坐标。在不使用锁存器的条件下，该方法需要的 io 口较多且存在按键冲突。本小结讨论一种新型的方法。

## 串行交错扫描原理
```


                       [-]                 [-]                 [-]                 [-]     ...
[IO.A] --+---[T]--------|---------+---------|-------------------|---------+---------|----  ...
         |              |         |         |                   |         |         |      ...
         +----+---------|---------|---------|---------+---------|---------|---------|----  ...
              |         |         |         |         |         |         |         |      ...
             [R0]      [C0]      [R1]      [C1]      [R2]      [C2]      [R3]      [C3]    ...
              |         |         |         |         |         |         |         |      ...
[IO.C] --+----|---[>]---+----+----|---[>]---+----+----|---[>]---+----+----|---[>]---+----  ...
         |    |         |    |    |         |    |    |         |    |    |         |      ...
         |    +----+    |    |    +----+    |    |    +----+    |    |    +----+    |      ...
         |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |      ...
         +--*[N0]  +--*[N1]  +--*[N2]  +--*[N3]  +--*[N4]  +--*[N5]  +--*[N6]  +--*[N7]    ...
              |         |         |         |         |         |         |         |      ...
              |    +----+         |    +----+         |    +----+         |    +----+      ...
              |    |    |         |    |    |         |    |    |         |    |    |      ...
              |    |    /         |    |    /         |    |    /         |    |    /      ...
              |    |    |         |    |    |         |    |    |         |    |    |      ...
              +----|----+---------+----|----+---------+----|----+---------+----|----+----  ...
              |    |                   |                   |                   |           ...
             [-]  [V]                 [V]                 [V]                 [V]          ...
                   |                   |                   |                   |           ...
[IO.D] --+---------+-------------------+-------------------+-------------------+---------  ...
         |
        [R]
        [-]


定义：
[R] 为电阻
[C] 为电容
[N] 为 NMOS 管（* 为控制端）
[T] 为反相器
[-] 为 GND
[>] 
[V] 均为肖特基二极管，箭头指向导通方向
[/] 为开关

IO.A 为电容输出使能端
IO.C 为电容充电端，也是开始按键信号扫描的使能端
IO.D 为检测端，也是漏电端

描述：
- 1. 让 IO.A 处于低电平，IO.C 处于高电平，IO.D 处于输入态。处于高电平的 IO.C 将二极管链上的电容充满电，
     此时用于控制输出的 MOS 管处于截止状态，IO.D 读到的是下拉电阻上的低电平
- 2. 将 IO.C 置为低电平，此时 N0 处于截止状态，再将 IO.A 置为高电平，此时 N1 导通，
     若左端第一个开关断开，IO.D 将读到来自 C0 的高电平，否则 C0 将对地放电，IO.D 端将保持低电平。
- 3. IO.D 读取到稳定的状态后，主动输出低电平让 C0 快速漏电。
- 4. 放电完毕的 C0 将让 N2 处于截止状态，此时将 IO.A 反转电平，N3 将导通，接下来的步骤与读取 C0 的步骤一致

优点：
- 不会存在按下多个键值冲突的情况
- 使用极少的 IO 口

缺点：
- 该方式会消耗较多的电容和二极管

```