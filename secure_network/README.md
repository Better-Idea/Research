# 下一代网络·草案
## 伪造 IP 请求攻击应对方案
背景：攻击者通过随机生成源 IP 请求目标服务器，导致服务器出现大量处于中间状态链接不能及时关闭  
基于：攻击者由于生成的 ip 不属于自身，所以一般无法收到服务器返回的握手消息  

交互过程：  
- C：客户端向服务端发送请求，并附上客户端 IP  
- S：服务端此时不存储任何信息，只是根据客户端 IP、时间戳以及一些附带的信息
进行加密并返回给客户端
- C：客户端 echo 服务端返回的信息
- S：服务端收到客户端 echo 的信息，并解密，比对密文中的 IP 是否和当前
请求的 IP 一致，时间戳是否超出有效期。若无效，则返回无效对应的状态码，若有效，
则建立会话并返回新的加密串，该加密串可以当作会话 ID，里面紧凑的存下诸如 IP，时间戳，交互句柄，基本状态等必要的信息
- C：客户端若收到了访问失败的状态码或者暂时没有收到服务端传来的消息，则等待指定的时间，如果这段时间没有出现会话建立
成功的消息则认为请求失败。

观念：  
- 失败可能是假的，成功不一定是真的，但如果碰到失败就放弃那就不可能成功了
